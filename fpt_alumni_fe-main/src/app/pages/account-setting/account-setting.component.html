<div class="container light-style flex-grow-1 container-p-y">
  <div class="col-lg-12 d-flex align-items-start">
    <div class="col-lg-3 nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
      <h1 class="mb-4 ms-4 setting-title">Settings</h1>

      <button class="nav-link active" id="v-pills-user-profile-tab" data-bs-toggle="pill"
        data-bs-target="#v-pills-user-profile" type="button" role="tab" aria-controls="v-pills-user-profile"
        aria-selected="true">
        Basic Info
      </button>
      <button class="nav-link" id="v-pills-contact-tab" data-bs-toggle="pill" data-bs-target="#v-pills-contact"
        type="button" role="tab" aria-controls="v-pills-contact" aria-selected="false">
        Contact Details
      </button>
      <button class="nav-link" id="v-pills-work-experience-tab" data-bs-toggle="pill"
        data-bs-target="#v-pills-work-experience" type="button" role="tab" aria-controls="v-pills-work-experience"
        aria-selected="false">
        Work Info
      </button>
      <button class="nav-link" id="v-pills-education-experience-tab" data-bs-toggle="pill"
        data-bs-target="#v-pills-education-experience" type="button" role="tab"
        aria-controls="v-pills-education-experience" aria-selected="false">
        Education Info
      </button>
      <button class="nav-link" id="v-pills-privacy-settings-tab" data-bs-toggle="pill"
        data-bs-target="#v-pills-privacy-settings" type="button" role="tab" aria-controls="v-pills-privacy-settings"
        aria-selected="false">
        Privacy Settings
      </button>
      <button class="nav-link" id="v-pills-account-tab" data-bs-toggle="pill" data-bs-target="#v-pills-account"
        type="button" role="tab" aria-controls="v-pills-account" aria-selected="false">
        Account & Password
      </button>
    </div>
    <div class="col-lg-9 tab-content" id="v-pills-tabContent">
      <!-- User Profile -->
      <div class="tab-pane fade show active" id="v-pills-user-profile" role="tabpanel"
        aria-labelledby="v-pills-user-profile-tab">
        <div class="row">
          <!-- left column -->
          <div class="">
            <div class="imag-upload">
              <div class="avatar">
                <app-image-control [width]="200" [height]="200" [imageUrl]="avatar"></app-image-control>
              </div>
            </div>

          </div>

          <form class="row g-3 border border-2 rounded mt-3 p-3" [formGroup]="userBasicInfoForm"
            (ngSubmit)="saveInfo()">
            <!-- edit form column -->
            <div class="col-lg-12 row personal-info mb-3">
              <div class="col-md-6">
                <label for="inputFirstName" class="form-label required-asterisk">Full Name</label>
                <input type="text" class="form-control" name="fullName" formControlName="fullName" />
                <div *ngIf="fullName!.invalid && fullName!.touched" class="invalid-feedback d-block">
                  <div *ngIf="fullName!.errors?.['required']">
                    Name is required.
                  </div>
                </div>
              </div>

              <div class="col-md-6 mb-3">
                <label for="inputFirstName" class="form-label required-asterisk">Main email</label>
                <input readonly type="text" class="form-control " name="mainEmail" formControlName="mainEmail"
                  [class.is-invalid]="mainEmail!.invalid && (mainEmail!.dirty || mainEmail!.touched)" />
                <div *ngIf="mainEmail!.invalid && (mainEmail!.dirty || mainEmail!.touched)" class="invalid-feedback">
                  <div *ngIf="mainEmail?.errors?.['required']">Email is required</div>
                  <div *ngIf="mainEmail!.errors?.['email']">Invalid email format</div>
                </div>
              </div>

              <div class="col-md-4 mb-3">
                <label for="inputLastName" class="form-label">Date Of Birth</label>
                <input type="date" class="form-control" id="inputDob" formControlName="dateOfBirth" />
              </div>
              <div class="col-md-4 mb-3">
                <label for="inputLastName" class="form-label">Gender</label>
                <div class="">

                  <label class="form-check-label">
                    <input class="form-check-input" type="radio" formControlName="gender" [value]="1"> Male
                  </label>
                  <label class="form-check-label">
                    <input class="form-check-input" type="radio" formControlName="gender" [value]="0"> Female
                  </label>
                  <label class="form-check-label">
                    <input class="form-check-input" type="radio" formControlName="gender" [value]="2"> Other
                  </label>
                </div>
              </div>

              <p class="break-title">School Info:</p>



              <div class="col-md-4 mb-3">
                <label for="inputStudentID" class="form-label">Student ID</label>
                <input type="text" class="form-control" name="studentCode" formControlName="studentCode" />
              </div>



              <div class="col-md-6 mb-3">
                <label class="form-label" for="major-select">Major</label>
                <select class="form-control" id="major-select" formControlName="major">
                  <option *ngFor="let major of majors" [value]="major.id">{{ major.title }}</option>
                </select>
              </div>









              <div class="col-md-4 mb-3">
                <label class="form-label fw-bold required-asterisk">Are you graduated?</label>
                <div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="isGraduated" id="inlineRadio1" [value]="true"
                      formControlName="isGraduated">
                    <label class="form-check-label" for="inlineRadio1">Yes</label>
                  </div>
                  <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="isGraduated" id="inlineRadio2" [value]="false"
                      formControlName="isGraduated">
                    <label class="form-check-label" for="inlineRadio2">No</label>
                  </div>
                  <div *ngIf="isGraduated!.invalid && isGraduated!.touched" class="invalid-feedback d-block">
                    Please select graduation status
                  </div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="inputState" class="form-label">Campus</label>
                <select id="inputState" class="form-select" formControlName="campus">
                  <option value="Ha_Noi">FU Ha Noi</option>
                  <option value="Ho_Chi_Minh">FU Ho Chi Minh</option>
                  <option value="Can_Tho">FU Can Tho</option>
                  <option value="Quy_Nhon">FU Quy Nhon</option>
                  <option value="Da_Nang">FU Da Nang</option>
                </select>
              </div>
              <div class="col-md-2 mb-1">
                <label for="inputState" class="form-label">Class</label>
                <input type="text" class="form-control" id="inputClass" formControlName="class" />
              </div>
              <div class="text-end mt-3">
                <button type="submit" class="btn btn-save-info">
                  Save changes</button>&nbsp;

              </div>
            </div>
          </form>
        </div>
      </div>
      <!-- Contact Details -->

      <div class="tab-pane fade row" id="v-pills-contact" role="tabpanel" aria-labelledby="v-pills-contact-tab">
        <div class="row">
          <!-- left column -->
          <h3 class="mb-3">Contact Details</h3>

          <!-- edit form column -->
          <div class="col-lg-12 personal-info">
            <form class="row g-3 border border-2 rounded mt-3 p-3" [formGroup]="userContactInfoForm"
              (ngSubmit)="saveContactInfo()" role="form">
              <div class="col-md-6">
                <label for="inputFirstName" class="form-label">Main email</label>
                <input readonly type="text" class="form-control" name="mainEmail" formControlName="mainEmail" />
              </div>

              <div class="col-md-6">
                <label for="inputFirstName" class="form-label">Phone Number</label>
                <input type="number" class="form-control" name="phoneNumber" formControlName="phoneNumber" />
              </div>
              <div class="col-md-4">
                <label for="inputLinkedin" class="form-label">LinkedIn URL</label>
                <input type="text" class="form-control" id="inputLinkedin" formControlName="linkedUrl" />
              </div>
              <div class="text-end mt-3">
                <button type="submit" class="btn btn-save-info">
                  Save changes</button>&nbsp;
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Work Experience -->
      <div class="tab-pane fade" id="v-pills-work-experience" role="tabpanel"
        aria-labelledby="v-pills-work-experience-tab">
        <div class="row">
          <!-- left column -->

          <form class="row g-3 border border-2 rounded m-3 p-3" [formGroup]="userWorkInfoForm">


            <div class="col-md-6 mb-3">
              <label for="inputFirstName" class="form-label">Current Job</label>
              <input type="text" class="form-control" name="job" formControlName="currentJob" />
            </div>

            <div class="col-md-6 mb-3">
              <label for="inputFirstName" class="form-label">Current Company</label>
              <input type="text" class="form-control" name="company" formControlName="currentCompany" />
            </div>

            <div class="col-md-6 mb-3 my-0">
              <label class="form-label">Current working country</label>
              <ng-select formControlName="currentJobCountry" [items]="listCountry" bindLabel="native" bindValue="name"
                (change)="findAllStateByCountry($event)" placeholder="Select an option" [searchable]="true">
              </ng-select>
              <label class="form-label mt-3">Current working state</label>
              <ng-select formControlName="currentJobCity" [items]="listState" bindLabel="name" bindValue="name"
                placeholder="Select an option" [searchable]="true">
              </ng-select>
            </div>

            <div class="col-md-6 my-0">
              <label for="inputFirstName" class="form-label">Work field</label>
              <div class="user-fild-container  bg-white">
                <mat-form-field class="user-field" appearance="outline">
                  <mat-label>Work field</mat-label>
                  <mat-chip-grid #chipGrid aria-label="Fruit selection">
                    <mat-chip-row *ngFor="let field of fields" (removed)="remove(field.id)">
                      {{field.title}}
                      <button matChipRemove [attr.aria-label]="'remove ' + field">
                        <mat-icon class="d-flex align-items-center" svgIcon="close"></mat-icon>
                      </button>
                    </mat-chip-row>
                  </mat-chip-grid>
                  <input placeholder="Choose filed" #fieldInput [formControl]="fieldCtrl" [matChipInputFor]="chipGrid"
                    [matAutocomplete]="auto" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    (matChipInputTokenEnd)="add($event)" />
                  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                    <mat-option *ngFor="let fieldTitle of filteredField | async" [value]="fieldTitle">
                      {{fieldTitle}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </div>
            </div>

            <div class="text-end mt-3">
              <button type="submit" class="btn btn-save-info" (click)="saveUserWorkInfo()">
                Save changes</button>&nbsp;

            </div>
          </form>
          <div class="mt-3">
            <h3 class="mb-3">Work Experience</h3>
            <button class="btn btn-save-info mb-4" type="button" data-bs-toggle="collapse" data-bs-target="#workForm"
              aria-expanded="false" aria-controls="workForm">
              Add New Work
            </button>
          </div>
          <div class="collapse" id="workForm">
            <div class="addWork">
              <form class="row g-3 border border-2 rounded mt-3 p-3" [formGroup]="userWorkExperienceForm"
                (ngSubmit)="addWorkExperience()">
                <div>
                  <label for="inputCompanyName" class="form-label required-asterisk">Company Name</label>
                  <input type="text" class="form-control mb-2" id="inputCompanyName" placeholder=""
                    formControlName="company" />
                  <div *ngIf="workCompany!.invalid && workCompany!.touched" class="invalid-feedback d-block">
                    <div *ngIf="workCompany!.errors?.['required']">
                      Comany name is required.
                    </div>
                  </div>
                </div>
                <div>
                  <label for="inputWorkPosition" class="form-label required-asterisk">Work Position</label>
                  <input type="text" class="form-control mb-2" id="inputWorkPosition" placeholder=""
                    formControlName="position" />
                  <div *ngIf="workPosition!.invalid && workPosition!.touched" class="invalid-feedback d-block">
                    <div *ngIf="workPosition!.errors?.['required']">
                      Work position is required.
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6">
                  <label for="inputStart" class="form-label required-asterisk">Start</label>
                  <input type="month" class="form-control w-50" id="startMonthPickerWork" formControlName="startDate" />
                  <div *ngIf="workStartDate!.invalid && workStartDate!.touched" class="invalid-feedback d-block">
                    <div *ngIf="workStartDate!.errors?.['required']">
                      Start date is required.
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6">
                  <label for="inputEnd" class="form-label required-asterisk">End</label>
                  <div class="d-flex">
                    <input type="month" class="form-control w-50" id="endMonthPickerWork" formControlName="endDate" />
                    <div *ngIf="workEndDate!.invalid && workEndDate!.touched" class="invalid-feedback d-block">
                      <div *ngIf="workEndDate!.errors?.['required']">
                        End date is required.
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <label for="inputJobDescription" class="form-label">Job Description</label>
                  <textarea class="form-control mb-2" id="description" rows="3"
                    formControlName="description"></textarea>
                </div>
                <div class="text-end mt-3">
                  <button type="submit" class="btn btn-save-info">Add</button>&nbsp;
                  <button type="button" class="btn btn-default" data-bs-toggle="collapse" data-bs-target="#workForm"
                    aria-expanded="false" aria-controls="workForm">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>
          <!-- edit form column -->
          <div class="col-lg-12 personal-info">
            <div class="card my-4" *ngFor="let item of listWorkExperience">
              <div class="card-header d-flex justify-content-between">
                <h4>{{item.company}}</h4>
                <mat-icon class="delete-icon" svgIcon="delete"></mat-icon>
              </div>
              <div class="card-body">
                <h5 class="card-title">{{item.position}}</h5>
                <div class="card-text">
                  <p>{{convertToNormalDateFormat(item.startDate) + " - " + convertToNormalDateFormat(item.endDate)}}</p>
                  <p>
                    {{item.description}}
                  </p>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Education Experience -->
      <div class="tab-pane fade" id="v-pills-education-experience" role="tabpanel"
        aria-labelledby="v-pills-education-experience-tab">
        <div class="row">
          <!-- left column -->
          <h3 class="mb-3">Education Experience</h3>
          <div class="mt-3">
            <button class="btn btn-save-info mb-4" type="button" data-bs-toggle="collapse"
              data-bs-target="#educationForm" aria-expanded="false" aria-controls="educationForm">
              Add New Educcation Experience
            </button>
          </div>
          <div class="collapse" id="educationForm">
            <div class="addEducation">
              <form class="row g-3 border border-2 rounded mt-3 p-3" [formGroup]="userEducationExperienceForm"
                (ngSubmit)="addEducationExpriene()">
                <div class="col-lg-6 col-md-6">
                  <label for="inputUniversity" class="form-label required-asterisk">University</label>
                  <input type="text" class="form-control mb-2" id="inputCompanyName" placeholder=""
                    formControlName="institution" />
                  <div *ngIf="eduInstitution!.invalid && eduInstitution!.touched" class="invalid-feedback d-block">
                    <div *ngIf="eduInstitution!.errors?.['required']">
                      Institution is required.
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6">
                  <label for="inputMajor" class="form-label required-asterisk">Major</label>
                  <input type="text" class="form-control mb-2" id="inputMajor" placeholder="" formControlName="major" />
                  <div *ngIf="eduMajor!.invalid && eduInstitution!.touched" class="invalid-feedback d-block">
                    <div *ngIf="eduInstitution!.errors?.['required']">
                      Major is required.
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6">
                  <label for="inputStart" class="form-label required-asterisk">Start</label>
                  <input type="month" class="form-control w-50" id="startMonthPickerEdu" formControlName="startDate" />
                  <div *ngIf="eduStartDate!.invalid && eduInstitution!.touched" class="invalid-feedback d-block">
                    <div *ngIf="eduInstitution!.errors?.['required']">
                      Start date is required.
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-md-6">
                  <label for="inputEnd" class="form-label required-asterisk">End</label>
                  <div class="d-flex">
                    <input type="month" class="form-control w-50" id="endMonthPickerEdu" formControlName="endDate" />
                    <div *ngIf="eduEndDate!.invalid && eduInstitution!.touched" class="invalid-feedback d-block">
                      <div *ngIf="eduInstitution!.errors?.['required']">
                        End date is required.
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <label for="inputUniversityAchievement" class="form-label">University Achievements</label>
                  <textarea class="form-control mb-2" id="inputUniversityAchievement" rows="3"
                    formControlName="description"></textarea>
                </div>
                <div class="text-end mt-3">
                  <button type="submit" class="btn btn-save-info">Add</button>&nbsp;
                  <button type="button" class="btn btn-default" data-bs-toggle="collapse"
                    data-bs-target="#educationForm" aria-expanded="false" aria-controls="educationForm">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="col-lg-12 personal-info">
            <div class="card my-4" *ngFor="let item of listEducationExperiences">
              <div class="card-header d-flex justify-content-between">
                <h5>{{item.institution}}</h5>
                <mat-icon class="delete-icon" svgIcon="delete"></mat-icon>
              </div>
              <div class="card-body">
                <h5 class="card-title">{{item.major}}</h5>
                <div class="card-text">
                  <p>{{convertToNormalDateFormat(item.startDate) + " - " + convertToNormalDateFormat(item.endDate)}}</p>
                  <p>
                    {{item.description}}
                  </p>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
      <!-- Privacy setting -->
      <div class="tab-pane fade" id="v-pills-privacy-settings" role="tabpanel"
        aria-labelledby="v-pills-privacy-settings-tab">
        <h3 class="mb-3">Privacy Settings</h3>
        <form class="row g-3 border border-2 rounded mt-3 p-3" role="form">
          <div class="col-lg-6 col-md-6">
            <label for="" class="form-label">Who can see My Email</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyProfile" id="privacyProfile1" />
              <label class="form-check-label" for="privacyProfile1">
                Everyone
              </label>
            </div>
            <!-- <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyProfile" id="privacyProfile2" />
              <label class="form-check-label" for="privacyProfile2">
                Users of my Network
              </label>
            </div> -->
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyProfile" id="privacyProfile3" checked />
              <label class="form-check-label" for="privacyProfile3">
                None
              </label>
            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <label for="" class="form-label">Who can see My Phone</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyContact" id="privacyContact1" />
              <label class="form-check-label" for="privacyContact1">
                Everyone
              </label>
            </div>
            <!-- <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyContact" id="privacyContact2" />
              <label class="form-check-label" for="privacyContact2">
                Users of my Network
              </label>
            </div> -->
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyContact" id="privacyContact3" checked />
              <label class="form-check-label" for="privacyContact3">
                None
              </label>
            </div>
          </div>
          <!-- <div class="col-lg-6 col-md-6">
            <label for="" class="form-label">Who can see My Work Experience</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyWork" id="privacyWork1" />
              <label class="form-check-label" for="privacyWork1">
                Everyone
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyWork" id="privacyWork2" />
              <label class="form-check-label" for="privacyWork2">
                Users of my Network
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyWork" id="privacyWork3" checked />
              <label class="form-check-label" for="privacyWork3">
                None
              </label>
            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <label for="" class="form-label">Who can see My Education Experience</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyEducation" id="privacyEducation1" />
              <label class="form-check-label" for="privacyEducation1">
                Everyone
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyEducation" id="privacyEducation2" />
              <label class="form-check-label" for="privacyEducation2">
                Users of my Network
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="privacyEducation" id="privacyEducation3" checked />
              <label class="form-check-label" for="privacyEducation3">
                None
              </label>
            </div>
          </div>-->

        </form>
      </div>
      <!-- change password -->
      <div class="tab-pane fade" id="v-pills-account" role="tabpanel" aria-labelledby="v-pills-account-tab">
        <h3 class="mb-3">Account & Password</h3>
        <form class="border border-2 rounded mt-3 p-3" [formGroup]="changePasswordForm" (ngSubmit)="changePassord()">
          <div class="d-flex align-items-center col-lg-6 col-md-6 pb-2">
            <label class="mr-2">Email:&nbsp;</label>
            <input readonly type="text" class="form-control" [value]="mainEmail?.value" />
          </div>
          <div class="col-lg-6 col-md-6">
            <label for="inputOldPassword" class="form-label">Old Password</label>
            <input type="password" class="form-control mb-2 required-asterisk" id="inputOldPassword" placeholder=""
              formControlName="currentPassword" />
            <div *ngIf="currentPassword!.invalid && (currentPassword!.dirty || currentPassword!.touched)"
              class="invalid-feedback d-block">
              <div *ngIf="currentPassword!.errors?.['required']">
                Password is required.
              </div>
              <div *ngIf="currentPassword!.errors?.['minlength']">
                Password must be at least 6 characters long.
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <label for="inputNewPassword" class="form-label">New Password</label>
            <input type="password" class="form-control mb-2 required-asterisk" id="inputNewPassword" placeholder=""
              formControlName="password" />
            <div *ngIf="password!.invalid && (password!.dirty || password!.touched)" class="invalid-feedback d-block">
              <div *ngIf="password!.errors?.['required']">
                Password is required.
              </div>
              <div *ngIf="password!.errors?.['minlength']">
                Password must be at least 6 characters long.
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-6">
            <label for="inputConfirmPassword" class="form-label">Confirm Password</label>
            <input type="password" class="form-control mb-2 required-asterisk" id="inputConfirmPassword" placeholder=""
              formControlName="confirmPassword" />
            <div *ngIf="confirmPassword!.invalid && (confirmPassword!.dirty || confirmPassword!.touched)"
              class="invalid-feedback d-block">
              <div *ngIf="confirmPassword!.errors?.['required']">
                Password is required.
              </div>
              <div *ngIf="confirmPassword!.errors?.['minlength']">
                Password must be at least 6 characters long.
              </div>
            </div>
            <div
              *ngIf="changePasswordForm.errors?.['notMatching'] && (changePasswordForm!.dirty || changePasswordForm!.touched)"
              class="invalid-feedback d-block">
              Passwords do not match.
            </div>
          </div>
          <div class="d-flex justify-content-between mt-3">
            <button (click)="navigateForgotPassword()" class="btn btn-link">Forgot your password?</button>
            <button type="submit" class="btn btn-save-info">Save</button>
          </div>
        </form>
      </div>
    </div>
